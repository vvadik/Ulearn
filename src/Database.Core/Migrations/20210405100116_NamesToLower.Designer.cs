// <auto-generated />
using System;
using Database;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;

namespace Database.Migrations
{
    [DbContext(typeof(UlearnDb))]
    [Migration("20210405100116_NamesToLower")]
    partial class NamesToLower
    {
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("Npgsql:CollationDefinition:case_insensitive", "und@colStrength=secondary,und@colStrength=secondary,icu,False")
                .HasAnnotation("Npgsql:DefaultColumnCollation", "case_insensitive")
                .HasAnnotation("Relational:MaxIdentifierLength", 63)
                .HasAnnotation("ProductVersion", "5.0.3")
                .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

            modelBuilder.Entity("Database.Models.AdditionalScore", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("InstructorId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<int>("Score")
                        .HasColumnType("integer");

                    b.Property<string>("ScoringGroupId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<Guid>("UnitId")
                        .HasColumnType("uuid");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("InstructorId");

                    b.HasIndex("UnitId");

                    b.HasIndex("UserId");

                    b.HasIndex("CourseId", "UserId");

                    b.HasIndex("CourseId", "UserId", "UnitId", "ScoringGroupId")
                        .IsUnique();

                    b.ToTable("AdditionalScores");
                });

            modelBuilder.Entity("Database.Models.ApplicationUser", b =>
                {
                    b.Property<string>("Id")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<int>("AccessFailedCount")
                        .HasColumnType("integer");

                    b.Property<string>("AvatarUrl")
                        .HasColumnType("text");

                    b.Property<string>("ConcurrencyStamp")
                        .IsConcurrencyToken()
                        .HasColumnType("text");

                    b.Property<string>("Email")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<bool>("EmailConfirmed")
                        .HasColumnType("boolean");

                    b.Property<string>("FirstName")
                        .HasColumnType("text");

                    b.Property<short?>("Gender")
                        .HasColumnType("smallint");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<string>("KonturLogin")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("LastConfirmationEmailTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<DateTime?>("LastEdit")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("LastName")
                        .HasColumnType("text");

                    b.Property<bool>("LockoutEnabled")
                        .HasColumnType("boolean");

                    b.Property<DateTimeOffset?>("LockoutEnd")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Names")
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("text")
                        .HasComputedColumnSql("lower(immutable_concat_ws(' ', nullif(\"UserName\", ''), nullif(\"FirstName\",''), nullif(\"LastName\",''), nullif(\"FirstName\",'')))", true)
                        .UseCollation("default");

                    b.Property<string>("NormalizedEmail")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<string>("NormalizedUserName")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<string>("PasswordHash")
                        .HasColumnType("text");

                    b.Property<string>("PhoneNumber")
                        .HasColumnType("text");

                    b.Property<bool>("PhoneNumberConfirmed")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("Registered")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("SecurityStamp")
                        .HasColumnType("text");

                    b.Property<long?>("TelegramChatId")
                        .HasColumnType("bigint");

                    b.Property<string>("TelegramChatTitle")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("TwoFactorEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("UserName")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.HasKey("Id");

                    b.HasIndex("IsDeleted");

                    b.HasIndex("Names")
                        .HasMethod("gin")
                        .HasOperators(new[] { "gin_trgm_ops" });

                    b.HasIndex("NormalizedEmail")
                        .HasDatabaseName("EmailIndex");

                    b.HasIndex("NormalizedUserName")
                        .IsUnique()
                        .HasDatabaseName("UserNameIndex");

                    b.HasIndex("TelegramChatId");

                    b.ToTable("AspNetUsers");
                });

            modelBuilder.Entity("Database.Models.AutomaticExerciseChecking", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CheckingAgentName")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<string>("CompilationErrorHash")
                        .HasMaxLength(40)
                        .HasColumnType("character varying(40)");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("DebugLogsHash")
                        .HasMaxLength(40)
                        .HasColumnType("character varying(40)");

                    b.Property<string>("DisplayName")
                        .HasColumnType("text");

                    b.Property<TimeSpan?>("Elapsed")
                        .HasColumnType("interval");

                    b.Property<string>("ExecutionServiceName")
                        .HasMaxLength(40)
                        .HasColumnType("character varying(40)");

                    b.Property<bool>("IsCompilationError")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsRightAnswer")
                        .HasColumnType("boolean");

                    b.Property<string>("OutputHash")
                        .HasMaxLength(40)
                        .HasColumnType("character varying(40)");

                    b.Property<float?>("Points")
                        .HasColumnType("real");

                    b.Property<int?>("Score")
                        .HasColumnType("integer");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("CompilationErrorHash");

                    b.HasIndex("DebugLogsHash");

                    b.HasIndex("IsRightAnswer");

                    b.HasIndex("OutputHash");

                    b.HasIndex("UserId");

                    b.HasIndex("CourseId", "SlideId");

                    b.HasIndex("CourseId", "UserId");

                    b.HasIndex("CourseId", "SlideId", "IsRightAnswer");

                    b.HasIndex("CourseId", "SlideId", "Timestamp");

                    b.HasIndex("CourseId", "SlideId", "UserId");

                    b.ToTable("AutomaticExerciseCheckings");
                });

            modelBuilder.Entity("Database.Models.AutomaticQuizChecking", b =>
                {
                    b.Property<int>("Id")
                        .HasColumnType("integer");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IgnoreInAttemptsCount")
                        .HasColumnType("boolean");

                    b.Property<int>("Score")
                        .HasColumnType("integer");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.HasIndex("CourseId", "SlideId");

                    b.HasIndex("CourseId", "UserId");

                    b.HasIndex("CourseId", "SlideId", "Timestamp");

                    b.HasIndex("CourseId", "SlideId", "UserId");

                    b.ToTable("AutomaticQuizCheckings");
                });

            modelBuilder.Entity("Database.Models.Certificate", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("InstructorId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsPreview")
                        .HasColumnType("boolean");

                    b.Property<string>("Parameters")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid>("TemplateId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("InstructorId");

                    b.HasIndex("TemplateId");

                    b.HasIndex("UserId");

                    b.ToTable("Certificates");
                });

            modelBuilder.Entity("Database.Models.CertificateTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ArchiveName")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.HasKey("Id");

                    b.HasIndex("CourseId");

                    b.ToTable("CertificateTemplates");
                });

            modelBuilder.Entity("Database.Models.CertificateTemplateArchive", b =>
                {
                    b.Property<string>("ArchiveName")
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<Guid>("CertificateTemplateId")
                        .HasColumnType("uuid");

                    b.Property<byte[]>("Content")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.HasKey("ArchiveName");

                    b.HasIndex("CertificateTemplateId");

                    b.ToTable("CertificateTemplateArchives");
                });

            modelBuilder.Entity("Database.Models.Comments.Comment", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("AuthorId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsApproved")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsCorrectAnswer")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsForInstructorsOnly")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsPinnedToTop")
                        .HasColumnType("boolean");

                    b.Property<int>("ParentCommentId")
                        .HasColumnType("integer");

                    b.Property<DateTime>("PublishTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<string>("Text")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("SlideId");

                    b.HasIndex("AuthorId", "PublishTime");

                    b.ToTable("Comments");
                });

            modelBuilder.Entity("Database.Models.Comments.CommentLike", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<int>("CommentId")
                        .HasColumnType("integer");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("CommentId");

                    b.HasIndex("UserId", "CommentId")
                        .IsUnique();

                    b.ToTable("CommentLikes");
                });

            modelBuilder.Entity("Database.Models.Comments.CommentsPolicy", b =>
                {
                    b.Property<string>("CourseId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsCommentsEnabled")
                        .HasColumnType("boolean");

                    b.Property<int>("ModerationPolicy")
                        .HasColumnType("integer");

                    b.Property<bool>("OnlyInstructorsCanReply")
                        .HasColumnType("boolean");

                    b.HasKey("CourseId");

                    b.ToTable("CommentsPolicies");
                });

            modelBuilder.Entity("Database.Models.CourseAccess", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<short>("AccessType")
                        .HasColumnType("smallint");

                    b.Property<string>("Comment")
                        .HasColumnType("text");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("GrantTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("GrantedById")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("UserId")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("CourseId");

                    b.HasIndex("GrantTime");

                    b.HasIndex("GrantedById");

                    b.HasIndex("UserId");

                    b.HasIndex("CourseId", "IsEnabled");

                    b.HasIndex("CourseId", "UserId", "IsEnabled");

                    b.ToTable("CourseAccesses");
                });

            modelBuilder.Entity("Database.Models.CourseFile", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("CourseVersionId")
                        .HasColumnType("uuid");

                    b.Property<byte[]>("File")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.HasKey("Id");

                    b.HasIndex("CourseVersionId");

                    b.ToTable("CourseFiles");
                });

            modelBuilder.Entity("Database.Models.CourseGit", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("Branch")
                        .HasColumnType("text");

                    b.Property<string>("CourseId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("CreateTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<bool>("IsWebhookEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("PathToCourseXml")
                        .HasColumnType("text");

                    b.Property<string>("PrivateKey")
                        .HasColumnType("text");

                    b.Property<string>("PublicKey")
                        .HasColumnType("text");

                    b.Property<string>("RepoUrl")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("CourseGitRepos");
                });

            modelBuilder.Entity("Database.Models.CourseRole", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("Comment")
                        .HasColumnType("text");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("GrantTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("GrantedById")
                        .HasColumnType("text");

                    b.Property<bool?>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<int>("Role")
                        .HasColumnType("integer");

                    b.Property<string>("UserId")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("UserRoles");
                });

            modelBuilder.Entity("Database.Models.CourseVersion", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("AuthorId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<string>("CommitHash")
                        .HasMaxLength(40)
                        .HasColumnType("character varying(40)");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Description")
                        .HasColumnType("text");

                    b.Property<DateTime>("LoadingTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("PathToCourseXml")
                        .HasColumnType("text");

                    b.Property<DateTime?>("PublishTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("RepoUrl")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("AuthorId");

                    b.HasIndex("CourseId", "LoadingTime");

                    b.HasIndex("CourseId", "PublishTime");

                    b.ToTable("CourseVersions");
                });

            modelBuilder.Entity("Database.Models.EnabledAdditionalScoringGroup", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<int>("GroupId")
                        .HasColumnType("integer");

                    b.Property<string>("ScoringGroupId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("GroupId");

                    b.ToTable("EnabledAdditionalScoringGroups");
                });

            modelBuilder.Entity("Database.Models.ExerciseCodeReview", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<DateTime>("AddingTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("AuthorId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<string>("Comment")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int?>("ExerciseCheckingId")
                        .HasColumnType("integer");

                    b.Property<int>("FinishLine")
                        .HasColumnType("integer");

                    b.Property<int>("FinishPosition")
                        .HasColumnType("integer");

                    b.Property<bool>("HiddenFromTopComments")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<int>("StartLine")
                        .HasColumnType("integer");

                    b.Property<int>("StartPosition")
                        .HasColumnType("integer");

                    b.Property<int?>("SubmissionId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("AuthorId");

                    b.HasIndex("ExerciseCheckingId");

                    b.HasIndex("SubmissionId");

                    b.ToTable("ExerciseCodeReviews");
                });

            modelBuilder.Entity("Database.Models.ExerciseCodeReviewComment", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<DateTime>("AddingTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("AuthorId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<int>("ReviewId")
                        .HasColumnType("integer");

                    b.Property<string>("Text")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("AddingTime");

                    b.HasIndex("AuthorId");

                    b.HasIndex("ReviewId", "IsDeleted");

                    b.ToTable("ExerciseCodeReviewComments");
                });

            modelBuilder.Entity("Database.Models.ExerciseSolutionByGrader", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<Guid>("ClientId")
                        .HasColumnType("uuid");

                    b.Property<string>("ClientUserId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("SubmissionId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("ClientId");

                    b.HasIndex("SubmissionId");

                    b.ToTable("ExerciseSolutionByGraders");
                });

            modelBuilder.Entity("Database.Models.FeedViewTimestamp", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<int?>("TransportId")
                        .HasColumnType("integer");

                    b.Property<string>("UserId")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("Timestamp");

                    b.HasIndex("TransportId");

                    b.HasIndex("UserId");

                    b.HasIndex("UserId", "TransportId");

                    b.ToTable("FeedViewTimestamps");
                });

            modelBuilder.Entity("Database.Models.GraderClient", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("GraderClients");
                });

            modelBuilder.Entity("Database.Models.Group", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<bool>("CanUsersSeeGroupProgress")
                        .HasColumnType("boolean");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("CreateTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<bool>("DefaultProhibitFutherReview")
                        .HasColumnType("boolean");

                    b.Property<Guid>("InviteHash")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsArchived")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsInviteLinkEnabled")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsManualCheckingEnabled")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsManualCheckingEnabledForOldSolutions")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(300)
                        .HasColumnType("character varying(300)");

                    b.Property<string>("OwnerId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("CourseId");

                    b.HasIndex("InviteHash");

                    b.HasIndex("OwnerId");

                    b.ToTable("Groups");
                });

            modelBuilder.Entity("Database.Models.GroupAccess", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<short>("AccessType")
                        .HasColumnType("smallint");

                    b.Property<DateTime>("GrantTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("GrantedById")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<int>("GroupId")
                        .HasColumnType("integer");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("UserId")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("GrantTime");

                    b.HasIndex("GrantedById");

                    b.HasIndex("GroupId");

                    b.HasIndex("UserId");

                    b.HasIndex("GroupId", "IsEnabled");

                    b.HasIndex("GroupId", "UserId", "IsEnabled");

                    b.ToTable("GroupAccesses");
                });

            modelBuilder.Entity("Database.Models.GroupLabel", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("ColorHex")
                        .HasMaxLength(6)
                        .HasColumnType("character varying(6)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("OwnerId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("OwnerId");

                    b.HasIndex("OwnerId", "IsDeleted");

                    b.ToTable("GroupLabels");
                });

            modelBuilder.Entity("Database.Models.GroupMember", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<DateTime?>("AddingTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<int>("GroupId")
                        .HasColumnType("integer");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("GroupId");

                    b.HasIndex("UserId");

                    b.ToTable("GroupMembers");
                });

            modelBuilder.Entity("Database.Models.LabelOnGroup", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<int>("GroupId")
                        .HasColumnType("integer");

                    b.Property<int>("LabelId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("GroupId");

                    b.HasIndex("LabelId");

                    b.HasIndex("GroupId", "LabelId")
                        .IsUnique();

                    b.ToTable("LabelOnGroups");
                });

            modelBuilder.Entity("Database.Models.LastVisit", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.HasIndex("CourseId", "UserId");

                    b.ToTable("LastVisits");
                });

            modelBuilder.Entity("Database.Models.Like", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<int>("SubmissionId")
                        .HasColumnType("integer");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("SubmissionId");

                    b.HasIndex("UserId", "SubmissionId");

                    b.ToTable("Likes");
                });

            modelBuilder.Entity("Database.Models.LtiConsumer", b =>
                {
                    b.Property<int>("ConsumerId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("Key")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<string>("Secret")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("ConsumerId");

                    b.HasIndex("Key");

                    b.ToTable("LtiConsumers");
                });

            modelBuilder.Entity("Database.Models.LtiSlideRequest", b =>
                {
                    b.Property<int>("RequestId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Request")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("RequestId");

                    b.HasIndex("CourseId", "SlideId", "UserId");

                    b.ToTable("LtiSlideRequests");
                });

            modelBuilder.Entity("Database.Models.ManualExerciseChecking", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsChecked")
                        .HasColumnType("boolean");

                    b.Property<string>("LockedById")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<DateTime?>("LockedUntil")
                        .HasColumnType("timestamp without time zone");

                    b.Property<int?>("Percent")
                        .HasColumnType("integer");

                    b.Property<bool>("ProhibitFurtherManualCheckings")
                        .HasColumnType("boolean");

                    b.Property<int?>("Score")
                        .HasColumnType("integer");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<int>("SubmissionId")
                        .HasColumnType("integer");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("LockedById");

                    b.HasIndex("SubmissionId");

                    b.HasIndex("UserId");

                    b.HasIndex("CourseId", "SlideId");

                    b.HasIndex("CourseId", "UserId");

                    b.HasIndex("CourseId", "SlideId", "Timestamp");

                    b.HasIndex("CourseId", "SlideId", "UserId", "ProhibitFurtherManualCheckings");

                    b.ToTable("ManualExerciseCheckings");
                });

            modelBuilder.Entity("Database.Models.ManualQuizChecking", b =>
                {
                    b.Property<int>("Id")
                        .HasColumnType("integer");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IgnoreInAttemptsCount")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsChecked")
                        .HasColumnType("boolean");

                    b.Property<string>("LockedById")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<DateTime?>("LockedUntil")
                        .HasColumnType("timestamp without time zone");

                    b.Property<int>("Score")
                        .HasColumnType("integer");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("LockedById");

                    b.HasIndex("UserId");

                    b.HasIndex("CourseId", "SlideId");

                    b.HasIndex("CourseId", "UserId");

                    b.HasIndex("CourseId", "SlideId", "Timestamp");

                    b.HasIndex("CourseId", "SlideId", "UserId");

                    b.ToTable("ManualQuizCheckings");
                });

            modelBuilder.Entity("Database.Models.Notification", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<bool>("AreDeliveriesCreated")
                        .HasColumnType("boolean");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("CreateTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("Discriminator")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("InitiatedById")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("AreDeliveriesCreated");

                    b.HasIndex("CourseId");

                    b.HasIndex("CreateTime");

                    b.HasIndex("InitiatedById");

                    b.ToTable("Notifications");

                    b.HasDiscriminator<string>("Discriminator").HasValue("Notification");
                });

            modelBuilder.Entity("Database.Models.NotificationDelivery", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<DateTime>("CreateTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<int>("FailsCount")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("NextTryTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<int>("NotificationId")
                        .HasColumnType("integer");

                    b.Property<int>("NotificationTransportId")
                        .HasColumnType("integer");

                    b.Property<byte>("Status")
                        .HasColumnType("smallint");

                    b.HasKey("Id");

                    b.HasIndex("CreateTime");

                    b.HasIndex("NextTryTime");

                    b.HasIndex("NotificationTransportId");

                    b.HasIndex("NotificationId", "NotificationTransportId");

                    b.ToTable("NotificationDeliveries");
                });

            modelBuilder.Entity("Database.Models.NotificationTransport", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("Discriminator")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("UserId")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.HasIndex("UserId", "IsDeleted");

                    b.ToTable("NotificationTransports");

                    b.HasDiscriminator<string>("Discriminator").HasValue("NotificationTransport");
                });

            modelBuilder.Entity("Database.Models.NotificationTransportSettings", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<int>("NotificationTransportId")
                        .HasColumnType("integer");

                    b.Property<short>("NotificationType")
                        .HasColumnType("smallint");

                    b.HasKey("Id");

                    b.HasIndex("CourseId");

                    b.HasIndex("NotificationTransportId");

                    b.HasIndex("NotificationType");

                    b.HasIndex("CourseId", "NotificationType");

                    b.ToTable("NotificationTransportSettings");
                });

            modelBuilder.Entity("Database.Models.Quizzes.UserQuizAnswer", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("BlockId")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<bool>("IsRightAnswer")
                        .HasColumnType("boolean");

                    b.Property<string>("ItemId")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<int>("QuizBlockMaxScore")
                        .HasColumnType("integer");

                    b.Property<int>("QuizBlockScore")
                        .HasColumnType("integer");

                    b.Property<int>("SubmissionId")
                        .HasColumnType("integer");

                    b.Property<string>("Text")
                        .HasMaxLength(8192)
                        .HasColumnType("character varying(8192)");

                    b.HasKey("Id");

                    b.HasIndex("ItemId");

                    b.HasIndex("SubmissionId", "BlockId");

                    b.ToTable("UserQuizAnswers");
                });

            modelBuilder.Entity("Database.Models.Quizzes.UserQuizSubmission", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(40)
                        .HasColumnType("character varying(40)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.HasIndex("CourseId", "SlideId");

                    b.HasIndex("CourseId", "SlideId", "Timestamp");

                    b.HasIndex("CourseId", "SlideId", "UserId");

                    b.ToTable("UserQuizSubmissions");
                });

            modelBuilder.Entity("Database.Models.RestoreRequest", b =>
                {
                    b.Property<string>("Id")
                        .HasColumnType("text");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("RestoreRequests");
                });

            modelBuilder.Entity("Database.Models.SlideHint", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("HintId")
                        .HasColumnType("integer");

                    b.Property<bool>("IsHintHelped")
                        .HasColumnType("boolean");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.HasIndex("CourseId", "SlideId", "HintId", "UserId", "IsHintHelped");

                    b.ToTable("SlideHints");
                });

            modelBuilder.Entity("Database.Models.SlideRate", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("Rate")
                        .HasColumnType("integer");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.HasIndex("SlideId", "UserId");

                    b.ToTable("SlideRates");
                });

            modelBuilder.Entity("Database.Models.StepikAccessToken", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("AccessToken")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("AddedTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("AddedTime");

                    b.HasIndex("UserId");

                    b.ToTable("StepikAccessTokens");
                });

            modelBuilder.Entity("Database.Models.StepikExportProcess", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<DateTime?>("FinishTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<bool>("IsFinished")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsInitialExport")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsSuccess")
                        .HasColumnType("boolean");

                    b.Property<string>("Log")
                        .HasColumnType("text");

                    b.Property<string>("OwnerId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<DateTime>("StartTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<int>("StepikCourseId")
                        .HasColumnType("integer");

                    b.Property<string>("StepikCourseTitle")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("UlearnCourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.HasIndex("OwnerId");

                    b.ToTable("StepikExportProcesses");
                });

            modelBuilder.Entity("Database.Models.StepikExportSlideAndStepMap", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<string>("SlideXml")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("StepId")
                        .HasColumnType("integer");

                    b.Property<int>("StepikCourseId")
                        .HasColumnType("integer");

                    b.Property<string>("UlearnCourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.HasIndex("UlearnCourseId");

                    b.HasIndex("UlearnCourseId", "SlideId");

                    b.HasIndex("UlearnCourseId", "StepikCourseId");

                    b.ToTable("StepikExportSlideAndStepMaps");
                });

            modelBuilder.Entity("Database.Models.StyleErrorSettings", b =>
                {
                    b.Property<int>("ErrorType")
                        .HasColumnType("integer");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.HasKey("ErrorType");

                    b.ToTable("StyleErrorSettings");
                });

            modelBuilder.Entity("Database.Models.SystemAccess", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<short>("AccessType")
                        .HasColumnType("smallint");

                    b.Property<DateTime>("GrantTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("GrantedById")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("GrantTime");

                    b.HasIndex("GrantedById");

                    b.HasIndex("IsEnabled");

                    b.HasIndex("UserId");

                    b.HasIndex("UserId", "IsEnabled");

                    b.ToTable("SystemAccesses");
                });

            modelBuilder.Entity("Database.Models.TempCourse", b =>
                {
                    b.Property<string>("CourseId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("AuthorId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<DateTime>("LastUpdateTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<DateTime>("LoadingTime")
                        .HasColumnType("timestamp without time zone");

                    b.HasKey("CourseId");

                    b.HasIndex("AuthorId");

                    b.ToTable("TempCourses");
                });

            modelBuilder.Entity("Database.Models.TempCourseError", b =>
                {
                    b.Property<string>("CourseId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Error")
                        .HasColumnType("text");

                    b.HasKey("CourseId");

                    b.ToTable("TempCourseErrors");
                });

            modelBuilder.Entity("Database.Models.TextBlob", b =>
                {
                    b.Property<string>("Hash")
                        .HasMaxLength(40)
                        .HasColumnType("character varying(40)");

                    b.Property<string>("Text")
                        .HasColumnType("text");

                    b.HasKey("Hash");

                    b.ToTable("TextBlobs");
                });

            modelBuilder.Entity("Database.Models.UnitAppearance", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("PublishTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<Guid>("UnitId")
                        .HasColumnType("uuid");

                    b.Property<string>("UserName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("CourseId", "PublishTime");

                    b.ToTable("UnitAppearances");
                });

            modelBuilder.Entity("Database.Models.UserExerciseSubmission", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<int?>("AntiPlagiarismSubmissionId")
                        .HasColumnType("integer");

                    b.Property<int?>("AutomaticCheckingId")
                        .HasColumnType("integer");

                    b.Property<bool>("AutomaticCheckingIsRightAnswer")
                        .HasColumnType("boolean");

                    b.Property<int>("CodeHash")
                        .HasColumnType("integer");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<short>("Language")
                        .HasColumnType("smallint");

                    b.Property<string>("Sandbox")
                        .HasMaxLength(40)
                        .HasColumnType("character varying(40)");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<string>("SolutionCodeHash")
                        .IsRequired()
                        .HasMaxLength(40)
                        .HasColumnType("character varying(40)");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("AntiPlagiarismSubmissionId");

                    b.HasIndex("AutomaticCheckingId");

                    b.HasIndex("AutomaticCheckingIsRightAnswer");

                    b.HasIndex("Language");

                    b.HasIndex("Sandbox");

                    b.HasIndex("SolutionCodeHash");

                    b.HasIndex("Timestamp");

                    b.HasIndex("UserId");

                    b.HasIndex("CourseId", "AutomaticCheckingIsRightAnswer");

                    b.HasIndex("CourseId", "SlideId");

                    b.HasIndex("CourseId", "SlideId", "AutomaticCheckingIsRightAnswer");

                    b.HasIndex("CourseId", "SlideId", "Timestamp");

                    b.HasIndex("CourseId", "SlideId", "UserId");

                    b.ToTable("UserExerciseSubmissions");
                });

            modelBuilder.Entity("Database.Models.UserFlashcardsUnlocking", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("UnitId")
                        .HasColumnType("uuid");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("UserId", "CourseId", "UnitId");

                    b.ToTable("UserFlashcardsUnlocking");
                });

            modelBuilder.Entity("Database.Models.UserFlashcardsVisit", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("FlashcardId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<int>("Rate")
                        .HasColumnType("integer");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<Guid>("UnitId")
                        .HasColumnType("uuid");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("UserId", "CourseId", "UnitId", "FlashcardId");

                    b.ToTable("UserFlashcardsVisits");
                });

            modelBuilder.Entity("Database.Models.UserQuestion", b =>
                {
                    b.Property<int>("QuestionId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("CourseId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Question")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<string>("SlideTitle")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("Time")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UnitName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<string>("UserName")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("QuestionId");

                    b.HasIndex("UserId");

                    b.ToTable("UserQuestions");
                });

            modelBuilder.Entity("Database.Models.Visit", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<int>("AttemptsCount")
                        .HasColumnType("integer");

                    b.Property<string>("CourseId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("HasManualChecking")
                        .HasColumnType("boolean");

                    b.Property<string>("IpAddress")
                        .HasColumnType("text");

                    b.Property<bool>("IsPassed")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsSkipped")
                        .HasColumnType("boolean");

                    b.Property<int>("Score")
                        .HasColumnType("integer");

                    b.Property<Guid>("SlideId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.HasIndex("CourseId", "UserId");

                    b.HasIndex("SlideId", "Timestamp");

                    b.HasIndex("SlideId", "UserId");

                    b.HasIndex("CourseId", "SlideId", "UserId");

                    b.ToTable("Visits");
                });

            modelBuilder.Entity("Database.Models.WorkQueueItem", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("ItemId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("Priority")
                        .HasColumnType("integer");

                    b.Property<int>("QueueId")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("TakeAfterTime")
                        .HasColumnType("timestamp without time zone");

                    b.Property<string>("Type")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("WorkQueueItems");
                });

            modelBuilder.Entity("Database.Models.XQueueExerciseSubmission", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<bool>("IsResultSent")
                        .HasColumnType("boolean");

                    b.Property<int>("SubmissionId")
                        .HasColumnType("integer");

                    b.Property<int>("WatcherId")
                        .HasColumnType("integer");

                    b.Property<string>("XQueueHeader")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("SubmissionId");

                    b.HasIndex("WatcherId");

                    b.ToTable("XQueueExerciseSubmissions");
                });

            modelBuilder.Entity("Database.Models.XQueueWatcher", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("BaseUrl")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Password")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("QueueName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<string>("UserName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("XQueueWatchers");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRole", b =>
                {
                    b.Property<string>("Id")
                        .HasColumnType("text");

                    b.Property<string>("ConcurrencyStamp")
                        .IsConcurrencyToken()
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<string>("NormalizedName")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.HasKey("Id");

                    b.HasIndex("NormalizedName")
                        .IsUnique()
                        .HasDatabaseName("RoleNameIndex");

                    b.ToTable("AspNetRoles");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRoleClaim<string>", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("ClaimType")
                        .HasColumnType("text");

                    b.Property<string>("ClaimValue")
                        .HasColumnType("text");

                    b.Property<string>("RoleId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("RoleId");

                    b.ToTable("AspNetRoleClaims");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserClaim<string>", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasAnnotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn);

                    b.Property<string>("ClaimType")
                        .HasColumnType("text");

                    b.Property<string>("ClaimValue")
                        .HasColumnType("text");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("character varying(64)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("AspNetUserClaims");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserLogin<string>", b =>
                {
                    b.Property<string>("LoginProvider")
                        .HasColumnType("text");

                    b.Property<string>("ProviderKey")
                        .HasColumnType("text");

                    b.Property<string>("ProviderDisplayName")
                        .HasColumnType("text");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("character varying(64)");

                    b.HasKey("LoginProvider", "ProviderKey");

                    b.HasIndex("UserId");

                    b.ToTable("AspNetUserLogins");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserRole<string>", b =>
                {
                    b.Property<string>("UserId")
                        .HasColumnType("character varying(64)");

                    b.Property<string>("RoleId")
                        .HasColumnType("text");

                    b.HasKey("UserId", "RoleId");

                    b.HasIndex("RoleId");

                    b.ToTable("AspNetUserRoles");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserToken<string>", b =>
                {
                    b.Property<string>("UserId")
                        .HasColumnType("character varying(64)");

                    b.Property<string>("LoginProvider")
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .HasColumnType("text");

                    b.Property<string>("Value")
                        .HasColumnType("text");

                    b.HasKey("UserId", "LoginProvider", "Name");

                    b.ToTable("AspNetUserTokens");
                });

            modelBuilder.Entity("Database.Models.AbstractCommentNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int>("CommentId")
                        .HasColumnType("integer")
                        .HasColumnName("CommentId1");

                    b.HasIndex("CommentId");

                    b.HasDiscriminator().HasValue("AbstractCommentNotification");
                });

            modelBuilder.Entity("Database.Models.AddedInstructorNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<string>("AddedUserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasIndex("AddedUserId");

                    b.HasDiscriminator().HasValue("AddedInstructorNotification");
                });

            modelBuilder.Entity("Database.Models.CourseExportedToStepikNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int>("ProcessId")
                        .HasColumnType("integer");

                    b.HasIndex("ProcessId");

                    b.HasDiscriminator().HasValue("CourseExportedToStepikNotification");
                });

            modelBuilder.Entity("Database.Models.CreatedGroupNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int>("GroupId")
                        .HasColumnType("integer")
                        .HasColumnName("GroupId");

                    b.HasIndex("GroupId")
                        .HasDatabaseName("IX_Notifications_GroupId3");

                    b.HasDiscriminator().HasValue("CreatedGroupNotification");
                });

            modelBuilder.Entity("Database.Models.GrantedAccessToGroupNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int>("AccessId")
                        .HasColumnType("integer");

                    b.HasIndex("AccessId");

                    b.HasDiscriminator().HasValue("GrantedAccessToGroupNotification");
                });

            modelBuilder.Entity("Database.Models.GroupMemberHasBeenRemovedNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int>("GroupId")
                        .HasColumnType("integer")
                        .HasColumnName("GroupMemberHasBeenRemovedNotification_GroupId");

                    b.Property<string>("UserId")
                        .HasColumnType("character varying(64)");

                    b.HasIndex("GroupId");

                    b.HasIndex("UserId");

                    b.HasDiscriminator().HasValue("GroupMemberHasBeenRemovedNotification");
                });

            modelBuilder.Entity("Database.Models.GroupMembersHaveBeenAddedNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int>("GroupId")
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("integer")
                        .HasColumnName("GroupId");

                    b.Property<string>("UserDescriptions")
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("text")
                        .HasColumnName("UserDescriptions");

                    b.Property<string>("UserIds")
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("text")
                        .HasColumnName("UserIds");

                    b.HasIndex("GroupId")
                        .HasDatabaseName("IX_Notifications_GroupId2");

                    b.HasDiscriminator().HasValue("GroupMembersHaveBeenAddedNotification");
                });

            modelBuilder.Entity("Database.Models.GroupMembersHaveBeenRemovedNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int>("GroupId")
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("integer")
                        .HasColumnName("GroupId");

                    b.Property<string>("UserDescriptions")
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("text")
                        .HasColumnName("UserDescriptions");

                    b.Property<string>("UserIds")
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("text")
                        .HasColumnName("UserIds");

                    b.HasIndex("GroupId")
                        .HasDatabaseName("IX_Notifications_GroupId1");

                    b.HasDiscriminator().HasValue("GroupMembersHaveBeenRemovedNotification");
                });

            modelBuilder.Entity("Database.Models.InstructorMessageNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<string>("Text")
                        .IsRequired()
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("text")
                        .HasColumnName("Text");

                    b.HasDiscriminator().HasValue("InstructorMessageNotification");
                });

            modelBuilder.Entity("Database.Models.JoinedToYourGroupNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int>("GroupId")
                        .HasColumnType("integer")
                        .HasColumnName("JoinedToYourGroupNotification_GroupId");

                    b.Property<string>("JoinedUserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasIndex("GroupId");

                    b.HasIndex("JoinedUserId");

                    b.HasDiscriminator().HasValue("JoinedToYourGroupNotification");
                });

            modelBuilder.Entity("Database.Models.NotUploadedPackageNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<string>("CommitHash")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("NotUploadedPackageNotification_CommitHash");

                    b.Property<string>("RepoUrl")
                        .IsRequired()
                        .HasColumnType("text")
                        .HasColumnName("NotUploadedPackageNotification_RepoUrl");

                    b.HasDiscriminator().HasValue("NotUploadedPackageNotification");
                });

            modelBuilder.Entity("Database.Models.PassedManualExerciseCheckingNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int>("CheckingId")
                        .HasColumnType("integer");

                    b.Property<bool>("IsRecheck")
                        .HasColumnType("boolean");

                    b.HasIndex("CheckingId");

                    b.HasDiscriminator().HasValue("PassedManualExerciseCheckingNotification");
                });

            modelBuilder.Entity("Database.Models.PassedManualQuizCheckingNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int>("CheckingId")
                        .HasColumnType("integer")
                        .HasColumnName("PassedManualQuizCheckingNotification_CheckingId");

                    b.HasIndex("CheckingId");

                    b.HasDiscriminator().HasValue("PassedManualQuizCheckingNotification");
                });

            modelBuilder.Entity("Database.Models.PublishedPackageNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<Guid>("CourseVersionId")
                        .HasColumnType("uuid");

                    b.HasIndex("CourseVersionId");

                    b.HasDiscriminator().HasValue("PublishedPackageNotification");
                });

            modelBuilder.Entity("Database.Models.ReceivedAdditionalScoreNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int?>("ScoreId")
                        .HasColumnType("integer");

                    b.HasIndex("ScoreId");

                    b.HasDiscriminator().HasValue("ReceivedAdditionalScoreNotification");
                });

            modelBuilder.Entity("Database.Models.ReceivedCertificateNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<Guid>("CertificateId")
                        .HasColumnType("uuid");

                    b.HasIndex("CertificateId");

                    b.HasDiscriminator().HasValue("ReceivedCertificateNotification");
                });

            modelBuilder.Entity("Database.Models.ReceivedCommentToCodeReviewNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int?>("CommentId")
                        .HasColumnType("integer")
                        .HasColumnName("CommentId");

                    b.HasIndex("CommentId");

                    b.HasDiscriminator().HasValue("ReceivedCommentToCodeReviewNotification");
                });

            modelBuilder.Entity("Database.Models.RevokedAccessToGroupNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<int>("AccessId")
                        .HasColumnType("integer")
                        .HasColumnName("RevokedAccessToGroupNotification_AccessId");

                    b.HasIndex("AccessId");

                    b.HasDiscriminator().HasValue("RevokedAccessToGroupNotification");
                });

            modelBuilder.Entity("Database.Models.SystemMessageNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<string>("Text")
                        .IsRequired()
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("text")
                        .HasColumnName("Text");

                    b.HasDiscriminator().HasValue("SystemMessageNotification");
                });

            modelBuilder.Entity("Database.Models.UploadedPackageNotification", b =>
                {
                    b.HasBaseType("Database.Models.Notification");

                    b.Property<Guid>("CourseVersionId")
                        .HasColumnType("uuid")
                        .HasColumnName("UploadedPackageNotification_CourseVersionId");

                    b.HasIndex("CourseVersionId");

                    b.HasDiscriminator().HasValue("UploadedPackageNotification");
                });

            modelBuilder.Entity("Database.Models.FeedNotificationTransport", b =>
                {
                    b.HasBaseType("Database.Models.NotificationTransport");

                    b.HasDiscriminator().HasValue("FeedNotificationTransport");
                });

            modelBuilder.Entity("Database.Models.MailNotificationTransport", b =>
                {
                    b.HasBaseType("Database.Models.NotificationTransport");

                    b.HasDiscriminator().HasValue("MailNotificationTransport");
                });

            modelBuilder.Entity("Database.Models.TelegramNotificationTransport", b =>
                {
                    b.HasBaseType("Database.Models.NotificationTransport");

                    b.HasDiscriminator().HasValue("TelegramNotificationTransport");
                });

            modelBuilder.Entity("Database.Models.LikedYourCommentNotification", b =>
                {
                    b.HasBaseType("Database.Models.AbstractCommentNotification");

                    b.Property<string>("LikedUserId")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.HasIndex("LikedUserId");

                    b.HasDiscriminator().HasValue("LikedYourCommentNotification");
                });

            modelBuilder.Entity("Database.Models.NewCommentForInstructorsOnlyNotification", b =>
                {
                    b.HasBaseType("Database.Models.AbstractCommentNotification");

                    b.HasDiscriminator().HasValue("NewCommentForInstructorsOnlyNotification");
                });

            modelBuilder.Entity("Database.Models.NewCommentFromYourGroupStudentNotification", b =>
                {
                    b.HasBaseType("Database.Models.AbstractCommentNotification");

                    b.HasDiscriminator().HasValue("NewCommentFromYourGroupStudentNotification");
                });

            modelBuilder.Entity("Database.Models.NewCommentNotification", b =>
                {
                    b.HasBaseType("Database.Models.AbstractCommentNotification");

                    b.HasDiscriminator().HasValue("NewCommentNotification");
                });

            modelBuilder.Entity("Database.Models.RepliedToYourCommentNotification", b =>
                {
                    b.HasBaseType("Database.Models.AbstractCommentNotification");

                    b.Property<int>("ParentCommentId")
                        .HasColumnType("integer");

                    b.HasIndex("ParentCommentId");

                    b.HasDiscriminator().HasValue("RepliedToYourCommentNotification");
                });

            modelBuilder.Entity("Database.Models.AdditionalScore", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "Instructor")
                        .WithMany()
                        .HasForeignKey("InstructorId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Instructor");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.AutomaticExerciseChecking", b =>
                {
                    b.HasOne("Database.Models.TextBlob", "CompilationError")
                        .WithMany()
                        .HasForeignKey("CompilationErrorHash");

                    b.HasOne("Database.Models.TextBlob", "DebugLogs")
                        .WithMany()
                        .HasForeignKey("DebugLogsHash");

                    b.HasOne("Database.Models.TextBlob", "Output")
                        .WithMany()
                        .HasForeignKey("OutputHash");

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("CompilationError");

                    b.Navigation("DebugLogs");

                    b.Navigation("Output");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.AutomaticQuizChecking", b =>
                {
                    b.HasOne("Database.Models.Quizzes.UserQuizSubmission", "Submission")
                        .WithOne("AutomaticChecking")
                        .HasForeignKey("Database.Models.AutomaticQuizChecking", "Id")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Submission");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.Certificate", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "Instructor")
                        .WithMany()
                        .HasForeignKey("InstructorId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.CertificateTemplate", "Template")
                        .WithMany("Certificates")
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Instructor");

                    b.Navigation("Template");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.CertificateTemplateArchive", b =>
                {
                    b.HasOne("Database.Models.CertificateTemplate", "CertificateTemplate")
                        .WithMany()
                        .HasForeignKey("CertificateTemplateId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("CertificateTemplate");
                });

            modelBuilder.Entity("Database.Models.Comments.Comment", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "Author")
                        .WithMany()
                        .HasForeignKey("AuthorId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Author");
                });

            modelBuilder.Entity("Database.Models.Comments.CommentLike", b =>
                {
                    b.HasOne("Database.Models.Comments.Comment", "Comment")
                        .WithMany("Likes")
                        .HasForeignKey("CommentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Comment");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.CourseAccess", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "GrantedBy")
                        .WithMany()
                        .HasForeignKey("GrantedById");

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId");

                    b.Navigation("GrantedBy");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.CourseFile", b =>
                {
                    b.HasOne("Database.Models.CourseVersion", "CourseVersion")
                        .WithMany()
                        .HasForeignKey("CourseVersionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("CourseVersion");
                });

            modelBuilder.Entity("Database.Models.CourseRole", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.CourseVersion", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "Author")
                        .WithMany()
                        .HasForeignKey("AuthorId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Author");
                });

            modelBuilder.Entity("Database.Models.EnabledAdditionalScoringGroup", b =>
                {
                    b.HasOne("Database.Models.Group", "Group")
                        .WithMany()
                        .HasForeignKey("GroupId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Group");
                });

            modelBuilder.Entity("Database.Models.ExerciseCodeReview", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "Author")
                        .WithMany()
                        .HasForeignKey("AuthorId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.ManualExerciseChecking", "ExerciseChecking")
                        .WithMany("Reviews")
                        .HasForeignKey("ExerciseCheckingId");

                    b.HasOne("Database.Models.UserExerciseSubmission", "Submission")
                        .WithMany("Reviews")
                        .HasForeignKey("SubmissionId");

                    b.Navigation("Author");

                    b.Navigation("ExerciseChecking");

                    b.Navigation("Submission");
                });

            modelBuilder.Entity("Database.Models.ExerciseCodeReviewComment", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "Author")
                        .WithMany()
                        .HasForeignKey("AuthorId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Database.Models.ExerciseCodeReview", "Review")
                        .WithMany("Comments")
                        .HasForeignKey("ReviewId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Author");

                    b.Navigation("Review");
                });

            modelBuilder.Entity("Database.Models.ExerciseSolutionByGrader", b =>
                {
                    b.HasOne("Database.Models.GraderClient", "Client")
                        .WithMany()
                        .HasForeignKey("ClientId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Database.Models.UserExerciseSubmission", "Submission")
                        .WithMany()
                        .HasForeignKey("SubmissionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Client");

                    b.Navigation("Submission");
                });

            modelBuilder.Entity("Database.Models.FeedViewTimestamp", b =>
                {
                    b.HasOne("Database.Models.NotificationTransport", "Transport")
                        .WithMany()
                        .HasForeignKey("TransportId");

                    b.Navigation("Transport");
                });

            modelBuilder.Entity("Database.Models.GraderClient", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.Group", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "Owner")
                        .WithMany()
                        .HasForeignKey("OwnerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Owner");
                });

            modelBuilder.Entity("Database.Models.GroupAccess", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "GrantedBy")
                        .WithMany()
                        .HasForeignKey("GrantedById")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.HasOne("Database.Models.Group", "Group")
                        .WithMany()
                        .HasForeignKey("GroupId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.Navigation("GrantedBy");

                    b.Navigation("Group");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.GroupLabel", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "Owner")
                        .WithMany()
                        .HasForeignKey("OwnerId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Owner");
                });

            modelBuilder.Entity("Database.Models.GroupMember", b =>
                {
                    b.HasOne("Database.Models.Group", "Group")
                        .WithMany("Members")
                        .HasForeignKey("GroupId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Group");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.LabelOnGroup", b =>
                {
                    b.HasOne("Database.Models.Group", "Group")
                        .WithMany()
                        .HasForeignKey("GroupId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.GroupLabel", "Label")
                        .WithMany()
                        .HasForeignKey("LabelId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Group");

                    b.Navigation("Label");
                });

            modelBuilder.Entity("Database.Models.LastVisit", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.Like", b =>
                {
                    b.HasOne("Database.Models.UserExerciseSubmission", "Submission")
                        .WithMany("Likes")
                        .HasForeignKey("SubmissionId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Submission");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.ManualExerciseChecking", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "LockedBy")
                        .WithMany()
                        .HasForeignKey("LockedById");

                    b.HasOne("Database.Models.UserExerciseSubmission", "Submission")
                        .WithMany("ManualCheckings")
                        .HasForeignKey("SubmissionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("LockedBy");

                    b.Navigation("Submission");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.ManualQuizChecking", b =>
                {
                    b.HasOne("Database.Models.Quizzes.UserQuizSubmission", "Submission")
                        .WithOne("ManualChecking")
                        .HasForeignKey("Database.Models.ManualQuizChecking", "Id")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "LockedBy")
                        .WithMany()
                        .HasForeignKey("LockedById");

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("LockedBy");

                    b.Navigation("Submission");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.Notification", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "InitiatedBy")
                        .WithMany()
                        .HasForeignKey("InitiatedById")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("InitiatedBy");
                });

            modelBuilder.Entity("Database.Models.NotificationDelivery", b =>
                {
                    b.HasOne("Database.Models.Notification", "Notification")
                        .WithMany("Deliveries")
                        .HasForeignKey("NotificationId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Database.Models.NotificationTransport", "NotificationTransport")
                        .WithMany()
                        .HasForeignKey("NotificationTransportId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Notification");

                    b.Navigation("NotificationTransport");
                });

            modelBuilder.Entity("Database.Models.NotificationTransport", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.NotificationTransportSettings", b =>
                {
                    b.HasOne("Database.Models.NotificationTransport", "NotificationTransport")
                        .WithMany()
                        .HasForeignKey("NotificationTransportId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("NotificationTransport");
                });

            modelBuilder.Entity("Database.Models.Quizzes.UserQuizAnswer", b =>
                {
                    b.HasOne("Database.Models.Quizzes.UserQuizSubmission", "Submission")
                        .WithMany()
                        .HasForeignKey("SubmissionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Submission");
                });

            modelBuilder.Entity("Database.Models.Quizzes.UserQuizSubmission", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.RestoreRequest", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.SlideHint", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.SlideRate", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.StepikAccessToken", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.StepikExportProcess", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "Owner")
                        .WithMany()
                        .HasForeignKey("OwnerId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Owner");
                });

            modelBuilder.Entity("Database.Models.SystemAccess", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "GrantedBy")
                        .WithMany()
                        .HasForeignKey("GrantedById")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("GrantedBy");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.TempCourse", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "Author")
                        .WithMany()
                        .HasForeignKey("AuthorId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Author");
                });

            modelBuilder.Entity("Database.Models.UserExerciseSubmission", b =>
                {
                    b.HasOne("Database.Models.AutomaticExerciseChecking", "AutomaticChecking")
                        .WithMany()
                        .HasForeignKey("AutomaticCheckingId");

                    b.HasOne("Database.Models.TextBlob", "SolutionCode")
                        .WithMany()
                        .HasForeignKey("SolutionCodeHash")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("AutomaticChecking");

                    b.Navigation("SolutionCode");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.UserFlashcardsUnlocking", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.UserFlashcardsVisit", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.UserQuestion", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.Visit", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.XQueueExerciseSubmission", b =>
                {
                    b.HasOne("Database.Models.UserExerciseSubmission", "Submission")
                        .WithMany()
                        .HasForeignKey("SubmissionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Database.Models.XQueueWatcher", "Watcher")
                        .WithMany()
                        .HasForeignKey("WatcherId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Submission");

                    b.Navigation("Watcher");
                });

            modelBuilder.Entity("Database.Models.XQueueWatcher", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRoleClaim<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityRole", null)
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserClaim<string>", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", null)
                        .WithMany("Claims")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserLogin<string>", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", null)
                        .WithMany("Logins")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserRole<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityRole", null)
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", null)
                        .WithMany("Roles")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserToken<string>", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Database.Models.AbstractCommentNotification", b =>
                {
                    b.HasOne("Database.Models.Comments.Comment", "Comment")
                        .WithMany()
                        .HasForeignKey("CommentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Comment");
                });

            modelBuilder.Entity("Database.Models.AddedInstructorNotification", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "AddedUser")
                        .WithMany()
                        .HasForeignKey("AddedUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("AddedUser");
                });

            modelBuilder.Entity("Database.Models.CourseExportedToStepikNotification", b =>
                {
                    b.HasOne("Database.Models.StepikExportProcess", "Process")
                        .WithMany()
                        .HasForeignKey("ProcessId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Process");
                });

            modelBuilder.Entity("Database.Models.CreatedGroupNotification", b =>
                {
                    b.HasOne("Database.Models.Group", "Group")
                        .WithMany()
                        .HasForeignKey("GroupId")
                        .HasConstraintName("FK_Notifications_Groups_GroupId3")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Group");
                });

            modelBuilder.Entity("Database.Models.GrantedAccessToGroupNotification", b =>
                {
                    b.HasOne("Database.Models.GroupAccess", "Access")
                        .WithMany()
                        .HasForeignKey("AccessId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Access");
                });

            modelBuilder.Entity("Database.Models.GroupMemberHasBeenRemovedNotification", b =>
                {
                    b.HasOne("Database.Models.Group", "Group")
                        .WithMany()
                        .HasForeignKey("GroupId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Group");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Database.Models.GroupMembersHaveBeenAddedNotification", b =>
                {
                    b.HasOne("Database.Models.Group", "Group")
                        .WithMany()
                        .HasForeignKey("GroupId")
                        .HasConstraintName("FK_Notifications_Groups_GroupId2")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Group");
                });

            modelBuilder.Entity("Database.Models.GroupMembersHaveBeenRemovedNotification", b =>
                {
                    b.HasOne("Database.Models.Group", "Group")
                        .WithMany()
                        .HasForeignKey("GroupId")
                        .HasConstraintName("FK_Notifications_Groups_GroupId1")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Group");
                });

            modelBuilder.Entity("Database.Models.JoinedToYourGroupNotification", b =>
                {
                    b.HasOne("Database.Models.Group", "Group")
                        .WithMany()
                        .HasForeignKey("GroupId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Database.Models.ApplicationUser", "JoinedUser")
                        .WithMany()
                        .HasForeignKey("JoinedUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Group");

                    b.Navigation("JoinedUser");
                });

            modelBuilder.Entity("Database.Models.PassedManualExerciseCheckingNotification", b =>
                {
                    b.HasOne("Database.Models.ManualExerciseChecking", "Checking")
                        .WithMany()
                        .HasForeignKey("CheckingId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Checking");
                });

            modelBuilder.Entity("Database.Models.PassedManualQuizCheckingNotification", b =>
                {
                    b.HasOne("Database.Models.ManualQuizChecking", "Checking")
                        .WithMany()
                        .HasForeignKey("CheckingId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Checking");
                });

            modelBuilder.Entity("Database.Models.PublishedPackageNotification", b =>
                {
                    b.HasOne("Database.Models.CourseVersion", "CourseVersion")
                        .WithMany()
                        .HasForeignKey("CourseVersionId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("CourseVersion");
                });

            modelBuilder.Entity("Database.Models.ReceivedAdditionalScoreNotification", b =>
                {
                    b.HasOne("Database.Models.AdditionalScore", "Score")
                        .WithMany()
                        .HasForeignKey("ScoreId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.Navigation("Score");
                });

            modelBuilder.Entity("Database.Models.ReceivedCertificateNotification", b =>
                {
                    b.HasOne("Database.Models.Certificate", "Certificate")
                        .WithMany()
                        .HasForeignKey("CertificateId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Certificate");
                });

            modelBuilder.Entity("Database.Models.ReceivedCommentToCodeReviewNotification", b =>
                {
                    b.HasOne("Database.Models.ExerciseCodeReviewComment", "Comment")
                        .WithMany()
                        .HasForeignKey("CommentId");

                    b.Navigation("Comment");
                });

            modelBuilder.Entity("Database.Models.RevokedAccessToGroupNotification", b =>
                {
                    b.HasOne("Database.Models.GroupAccess", "Access")
                        .WithMany()
                        .HasForeignKey("AccessId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Access");
                });

            modelBuilder.Entity("Database.Models.UploadedPackageNotification", b =>
                {
                    b.HasOne("Database.Models.CourseVersion", "CourseVersion")
                        .WithMany()
                        .HasForeignKey("CourseVersionId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("CourseVersion");
                });

            modelBuilder.Entity("Database.Models.LikedYourCommentNotification", b =>
                {
                    b.HasOne("Database.Models.ApplicationUser", "LikedUser")
                        .WithMany()
                        .HasForeignKey("LikedUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("LikedUser");
                });

            modelBuilder.Entity("Database.Models.RepliedToYourCommentNotification", b =>
                {
                    b.HasOne("Database.Models.Comments.Comment", "ParentComment")
                        .WithMany()
                        .HasForeignKey("ParentCommentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("ParentComment");
                });

            modelBuilder.Entity("Database.Models.ApplicationUser", b =>
                {
                    b.Navigation("Claims");

                    b.Navigation("Logins");

                    b.Navigation("Roles");
                });

            modelBuilder.Entity("Database.Models.CertificateTemplate", b =>
                {
                    b.Navigation("Certificates");
                });

            modelBuilder.Entity("Database.Models.Comments.Comment", b =>
                {
                    b.Navigation("Likes");
                });

            modelBuilder.Entity("Database.Models.ExerciseCodeReview", b =>
                {
                    b.Navigation("Comments");
                });

            modelBuilder.Entity("Database.Models.Group", b =>
                {
                    b.Navigation("Members");
                });

            modelBuilder.Entity("Database.Models.ManualExerciseChecking", b =>
                {
                    b.Navigation("Reviews");
                });

            modelBuilder.Entity("Database.Models.Notification", b =>
                {
                    b.Navigation("Deliveries");
                });

            modelBuilder.Entity("Database.Models.Quizzes.UserQuizSubmission", b =>
                {
                    b.Navigation("AutomaticChecking");

                    b.Navigation("ManualChecking");
                });

            modelBuilder.Entity("Database.Models.UserExerciseSubmission", b =>
                {
                    b.Navigation("Likes");

                    b.Navigation("ManualCheckings");

                    b.Navigation("Reviews");
                });
#pragma warning restore 612, 618
        }
    }
}
